# .github/workflows/playwright.yml

name: GUI Test Review

on:
  pull_request:
    branches: [main]
  workflow_dispatch:
  workflow_call:
jobs:
  review:
    name: Run GUI Test Analysis
    runs-on: ubuntu-latest
    permissions:
      contents: read # Allow checkout
      pull-requests: write # Allow PR comments
      pages: write # Allow deploying to GitHub Pages
      id-token: write # Needed for GitHub Pages deployment

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          # Fetch depth 0 is required for the main branch comparison logic
          fetch-depth: 0

      - name: Run GUI-Based Testing Code Review Action
        # This special 'uses' syntax runs the action.yml in the root of your own repository.
        uses: ./
        with:
          # Pass the GitHub token to the action for API access
          github-token: ${{ secrets.GITHUB_TOKEN }}
          # Override other inputs from your action.yml here if needed
          # For example:
          # node-version: '20'
          # fail-on-test-failure: 'true'
